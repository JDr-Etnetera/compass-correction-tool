<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="P=lJv5YrCD+9VQ_pe*%F">tmp</variable><variable id="(ffN|Uyj[}lfk@mSW.is">delta</variable><variable id="SZd_xv4=oE9d1ixf_M2a">compass</variable></variables><block type="function_call_output" id="dZjP?~9-o6bny#!QlW7G" disabled="true" x="1040" y="-192"><mutation name="getDelta_ComHis" functionid="/%9D=FC.?d7Cx.)lkWET"/></block><block type="device_forever" id="JHYmCL?9YP,D[%V9au{n" x="602" y="-126"/><block type="every_interval" id="MlYN#fzk^@iMhd1|6wH3" x="807" y="-126"><value name="interval"><shadow type="longTimePicker" id="G%3Kdw.+CrQC/;cTr~As"><field name="ms">500</field></shadow></value><statement name="HANDLER"><block type="variables_set" id=";e3YUc{j1O2EldkW|#On"><field name="VAR" id="P=lJv5YrCD+9VQ_pe*%F">tmp</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="function_call_output" id="D:J][UEZ!.IFi;W^j(_7"><mutation name="getDelta_ComHis" functionid="/%9D=FC.?d7Cx.)lkWET"/></block></value><next><block type="controls_if" id="}@IfraIBtKd5l{o5e8db"><mutation else="1"/><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="14fJe,akhGnW8!A.9%U4"><field name="OP">LT</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="5#]K%;B!_P2^G2j{XR/7"><field name="VAR" id="P=lJv5YrCD+9VQ_pe*%F">tmp</field></block></value><value name="B"><shadow type="math_number" id="F1|#f)j-T^@8~_+bks!e"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="serial_writestring" id="TBGm,T9W`=:Ujvu$-@$n"><value name="text"><block type="text_join" id="/V|bz-$^oR,T;/c40kT?"><mutation items="2"/><value name="ADD0"><shadow type="text" id="jLvR;F2krS`H0/qb}V:z"><field name="TEXT"> ERR </field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"/></shadow><block type="typescript_expression" id="^)gNFMh,jA!{tX0uuJJI" editable="false"><field name="EXPRESSION">'\n'</field></block></value></block></value></block></statement><statement name="ELSE"><block type="variables_set" id="EeOAk|m-g9wN-o+ww3nc"><field name="VAR" id="(ffN|Uyj[}lfk@mSW.is">delta</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="u[kY??[{d,d6m.n`cl]b"><field name="VAR" id="P=lJv5YrCD+9VQ_pe*%F">tmp</field></block></value><next><block type="serial_writevalue" id=",TgYn]}[X*O_`6D;Wlrh"><value name="name"><shadow type="text" id="u7oAS!Q%$,!JeiIoF*J:"><field name="TEXT">D</field></shadow></value><value name="value"><block type="variables_get" id=")=Mc$ejl3muTD]*+fc0O"><field name="VAR" id="(ffN|Uyj[}lfk@mSW.is">delta</field></block></value><next><block type="serial_writevalue" id="T:|@Mx40+fHHWC$`P!$A"><value name="name"><shadow type="text" id="%fqRDsq{toCJ2p_nL0.Q"><field name="TEXT">L</field></shadow></value><value name="value"><block type="typescript_expression" id="un.b;;gZ=$-qKtX1dOxb" editable="false"><field name="EXPRESSION">cHistory.getLength()</field></block></value></block></next></block></next></block></statement></block></next></block></statement></block><block type="device_random" id="DTd]{YGswPrwmH.-:g0i" disabled="true" x="1896" y="-146"><value name="min"><shadow type="math_number" id="Sb}gZi3u8,U.iAz`Y[d$" disabled="true"><field name="NUM">10</field></shadow></value><value name="limit"><shadow type="math_number" id="eWAHmGBXn.03M%]Q#T.T" disabled="true"><field name="NUM">15</field></shadow></value></block><block type="pxt-on-start" id="oPg^o*o]yogYB_MdX@b8" x="0" y="0"><statement name="HANDLER"><block type="typescript_statement" id="|*D416O!`5hb0U~QfW.m" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let tmp: number;" numlines="1" declaredvars="tmp"></mutation><next><block type="variables_set" id="oc[Z{GACBY44#PtST$LQ"><field name="VAR" id="P=lJv5YrCD+9VQ_pe*%F">tmp</field><value name="VALUE"><shadow type="math_number" id="h!{%(YQtDEybKYk{lguA"><field name="NUM">-100</field></shadow></value><next><block type="typescript_statement" id="2e,4FQ+xQI#~3K`:`)w}" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let compass: number;" numlines="1" declaredvars="compass"></mutation><next><block type="variables_set" id="PET85X!o$eb~bY/EI~2["><field name="VAR" id="SZd_xv4=oE9d1ixf_M2a">compass</field><value name="VALUE"><shadow type="math_number" id="?g=Pe~(EVdQ+{GWVxmY."><field name="NUM">0</field></shadow></value><next><block type="typescript_statement" id="k~}.}Cg0cfg+7H;iVj=v" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let delta: number;" numlines="1" declaredvars="delta"></mutation><next><block type="variables_set" id="w0n_SscJb)5,P,vvD1Hg"><field name="VAR" id="(ffN|Uyj[}lfk@mSW.is">delta</field><value name="VALUE"><shadow type="math_number" id="S*0Xww74Og[p.+!d1fbi"><field name="NUM">0</field></shadow></value><next><block type="typescript_statement" id="#*-{j%mzJ:;S84Z|P]w2" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="class LimitedFront {" line1="    private maxEntries: number;" line2="    private front: number[];" line3="    constructor(max: number) {" line4="        this.front = [];" line5="        this.maxEntries = max;" line6="    }" line7="    append(value: number) {" line8="        if (this.front.length &gt;= this.maxEntries) {" line9="            this.front.splice(0, this.maxEntries - this.front.length);" line10="        }" line11="        this.front.push(value);" line12="    }" line13="    getDelta(dec: number) {" line14="        if (this.getLength() &lt; 1) return -100;" line15="        let sum = 0;" line16="        this.front.forEach(function (e) {" line17="            sum += e;" line18="        });" line19="        return Math.round( (sum * Math.pow(10, dec)) / this.getLength() ) / Math.pow(10, dec);" line20="    }" line21="    getFromRow() {" line22="        if (this.front.length &gt; 0) {" line23="            return this.front.slice();" line24="        }" line25="        return -100;" line26="    }" line27="    getLength() {" line28="        return this.front.length;" line29="    }" line30="    clear() {" line31="        this.front = [];" line32="    }" line33="}" numlines="34"></mutation><next><block type="typescript_statement" id="O/0$}V`W7~Ws9uJSx;g}" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let cHistory = new LimitedFront(10);" numlines="1" declaredvars="cHistory"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="every_interval" id="|BeDJ[otw*MgCZ3`pHan" x="1404" y="-69"><value name="interval"><shadow type="longTimePicker" id="FkD/RsD}/b6`1Q$U6rf3"><field name="ms">100</field></shadow></value><statement name="HANDLER"><block type="variables_set" id="j(v|.[4yWmY`(|9.#(n`"><field name="VAR" id="SZd_xv4=oE9d1ixf_M2a">compass</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_heading" id=".$%xeNJ09:cysJKZ:S6M"/></value><next><block type="function_call" id="ZJGG{qkLYA`fi;4lh3;]"><mutation name="append_ComHis" functionid="m.?S9/Ir*sj?$,ZM|.1E"><arg name="value" id="mv2xzum5srkl83xhikya" type="number"/></mutation><value name="mv2xzum5srkl83xhikya"><shadow type="math_number" id="-:,sYIC_Z64:Hr4RYvTl"><field name="NUM">1</field></shadow><block type="variables_get" id="oSt,lYufX{g)+67}Qj2?"><field name="VAR" id="SZd_xv4=oE9d1ixf_M2a">compass</field></block></value><next><block type="serial_writevalue" id="u|Zgn+h;UO+UT!r00p1w"><value name="name"><shadow type="text" id="hcS=G5fJytV-Y]I34=+O"><field name="TEXT">c</field></shadow></value><value name="value"><block type="variables_get" id="r(^3lUL+.D2H}A+2Xc0V"><field name="VAR" id="SZd_xv4=oE9d1ixf_M2a">compass</field></block></value></block></next></block></next></block></statement></block><block type="function_definition" id="Bs.zsqT3nj*@J[Q*=Xc$" x="1838" y="58"><mutation name="getDelta_ComHis" functionid="/%9D=FC.?d7Cx.)lkWET"/><field name="function_name">getDelta_ComHis</field><statement name="STACK"><block type="function_return" id="2,4)pw}*w%$pv7.bjX%y"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="typescript_expression" id="izE!WNsN9.eEe|d@5pDL" editable="false"><field name="EXPRESSION">cHistory.getDelta(1)</field></block></value></block></statement></block><block type="function_definition" id="8peN/$B+|kgfFTbC)|mh" x="573" y="1703"><mutation name="append_ComHis" functionid="m.?S9/Ir*sj?$,ZM|.1E"><arg name="value" id="mv2xzum5srkl83xhikya" type="number"/></mutation><field name="function_name">append_ComHis</field><statement name="STACK"><block type="typescript_statement" id="7l9H7,{_=9Zp;E2=MWDb" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="cHistory.append(value);" numlines="1"></mutation></block></statement></block></xml>