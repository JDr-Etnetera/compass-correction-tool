<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="*I)a,CXV@sm-P/$,!-Z|">tmp</variable><variable id="k*_^23N{NbuSdFu*BU.-">delta</variable><variable id="Nf0};?C5zGUwj;$inZ9;">compass</variable></variables><block type="function_call_output" id="z|Bm*T=yil%~A,8kKiQ1" disabled="true" x="960" y="-272"><mutation name="getDelta_ComHis" functionid="]C0{-7@w]tSty|Ni,-^$"/></block><block type="pxt-on-start" id="fs(/E1D*`b3)7eS*o4L4" x="6" y="-181"><statement name="HANDLER"><block type="typescript_statement" id="NYK$%AS$kYy.1@!n%[h`" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let tmp: number;" numlines="1" declaredvars="tmp"></mutation><next><block type="variables_set" id="Zy{5%!?K^l}IsQ7KrT!3"><field name="VAR" id="*I)a,CXV@sm-P/$,!-Z|">tmp</field><value name="VALUE"><shadow type="math_number" id="X(V5O60{h61OxZQcA[de"><field name="NUM">-100</field></shadow></value><next><block type="typescript_statement" id="b3fudkwAz]y7v)A-tQHJ" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let compass: number;" numlines="1" declaredvars="compass"></mutation><next><block type="variables_set" id="n3H/Z%.=_BqiI2vfG:_L"><field name="VAR" id="Nf0};?C5zGUwj;$inZ9;">compass</field><value name="VALUE"><shadow type="math_number" id="9wVx46QAc675!3cvA=B)"><field name="NUM">0</field></shadow></value><next><block type="typescript_statement" id="TB!WA8*sG(,`x_p_k50I" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let delta: number;" numlines="1" declaredvars="delta"></mutation><next><block type="variables_set" id="%ngGmC0*tKK+,6F:!V:r"><field name="VAR" id="k*_^23N{NbuSdFu*BU.-">delta</field><value name="VALUE"><shadow type="math_number" id="DG8uO!H*NolED.P4%IHp"><field name="NUM">0</field></shadow></value><next><block type="typescript_statement" id="b#,b~jaL#*:}Tk}Y;^rA" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="class LimitedFront {" line1="    private maxEntries: number;" line2="    private front: number[];" line3="    constructor(max: number) {" line4="        this.front = [];" line5="        this.maxEntries = max;" line6="    }" line7="    append(value: number) {" line8="        if (this.front.length &gt;= this.maxEntries) {" line9="            this.front.splice(0, this.front.length - this.maxEntries +1);" line10="        }" line11="        this.front.push(value);" line12="    }" line13="    getDelta(dec: number) {" line14="        if (this.getLength() &lt; 1) return -100;" line15="        let sum = 0;" line16="        this.front.forEach(function (e) {" line17="            sum += e;" line18="        });" line19="        return Math.round( (sum * Math.pow(10, dec)) / this.getLength() ) / Math.pow(10, dec);" line20="    }" line21="    getFromRow() {" line22="        if (this.front.length &gt; 0) {" line23="            return this.front.slice(0,1);" line24="        }" line25="        return -100;" line26="    }" line27="    getLength() {" line28="        return this.front.length;" line29="    }" line30="    clearFront() {" line31="        this.front = [];" line32="    }" line33="    getHistory() {" line34="        return this.front" line35="    }" line36="}" numlines="37"></mutation><next><block type="typescript_statement" id="Cp;n1]_uN1C{W?merXk[" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let cHistory = new LimitedFront(100);" numlines="1" declaredvars="cHistory"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="device_forever" id="xTkJ??vB)0X0eA*8X0?C" x="522" y="-206"/><block type="every_interval" id="YsJPc:/+xG$u2PO^_]%t" x="771" y="-199"><value name="interval"><shadow type="longTimePicker" id="3c[TROr?9[nYNRW6KhO0"><field name="ms">500</field></shadow></value><statement name="HANDLER"><block type="variables_set" id="}M!XHkWp;l5BrwqoR0KM"><field name="VAR" id="*I)a,CXV@sm-P/$,!-Z|">tmp</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="function_call_output" id="?]-/!SF.Y:XY])$X=O:2"><mutation name="getDelta_ComHis" functionid="]C0{-7@w]tSty|Ni,-^$"/></block></value><next><block type="controls_if" id="93/Bn/Q$4VRud8I]9Sum"><mutation else="1"/><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="FOnyE^!Z@l03K]86`oDX"><field name="OP">LT</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="Z*ex50V6V{hZ4nJiPGRG"><field name="VAR" id="*I)a,CXV@sm-P/$,!-Z|">tmp</field></block></value><value name="B"><shadow type="math_number" id="mhw59VetXM*M|nR[^3f6"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="serial_writestring" id="kSPXjU;Z)0RdUl?*hu,l"><value name="text"><block type="text_join" id="_W:g[,`Q-rAJgn^iMg4@"><mutation items="2"/><value name="ADD0"><shadow type="text" id="FV^cw(Q}uYh)MKCW+w)n"><field name="TEXT"> ERR </field></shadow></value><value name="ADD1"><shadow type="text"><field name="TEXT"/></shadow><block type="typescript_expression" id="HZ1tLBRaP!2LyNFTn$!U" editable="false"><field name="EXPRESSION">'\n'</field></block></value></block></value></block></statement><statement name="ELSE"><block type="variables_set" id="|zC)2y?!@)^I3dL)wfr#"><field name="VAR" id="k*_^23N{NbuSdFu*BU.-">delta</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="9Kv]1/1zUwU^~bwm4orm"><field name="VAR" id="*I)a,CXV@sm-P/$,!-Z|">tmp</field></block></value><next><block type="serial_writevalue" id="P-q!iyG-f;}.mz*,6q$p"><value name="name"><shadow type="text" id="KRI^/BcBKw6vAw6V`5Ny"><field name="TEXT">D</field></shadow></value><value name="value"><block type="variables_get" id="spaZ3.[e3]gE!WP.5pYm"><field name="VAR" id="k*_^23N{NbuSdFu*BU.-">delta</field></block></value><next><block type="serial_writevalue" id="$?28:1E%s{kg_%.b-=rR"><value name="name"><shadow type="text" id="WwJ,Du@^5el.tqmLS+}t"><field name="TEXT">L</field></shadow></value><value name="value"><block type="typescript_expression" id="U+Hf82;ihf!I7[dW7(9a" editable="false"><field name="EXPRESSION">cHistory.getLength()</field></block></value></block></next></block></next></block></statement></block></next></block></statement></block><block type="device_random" id="@9HY*0pb6b[=z.{C3cN=" disabled="true" x="1816" y="-226"><value name="min"><shadow type="math_number" id="=z7)lu|w[Ff/bGyV9]@j" disabled="true"><field name="NUM">10</field></shadow></value><value name="limit"><shadow type="math_number" id="rP6uOQDMt~n2fHA2er*~" disabled="true"><field name="NUM">15</field></shadow></value></block><block type="every_interval" id="9q4o8oM~28-]e@m)po9." x="1316" y="-148"><value name="interval"><shadow type="longTimePicker" id="0c3Y#Y=fM!s?IyjmwTm3"><field name="ms">25</field></shadow></value><statement name="HANDLER"><block type="variables_set" id="F8_5=7ON(U}]B,.YP-im"><field name="VAR" id="Nf0};?C5zGUwj;$inZ9;">compass</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_heading" id="ywgNQbt-qFI^?/(4.?Uh"/></value><next><block type="function_call" id="|k%/.Ij[c|scztc+wwP4"><mutation name="append_ComHis" functionid="4dl=.G+$Li5na/!f8Am|"><arg name="value" id="guiyo0yuazakgfauxjxj" type="number"/></mutation><value name="guiyo0yuazakgfauxjxj"><shadow type="math_number" id="On_HXk0o;R_i5wyj/JNI"><field name="NUM">1</field></shadow><block type="variables_get" id="(sf:N_UwX4@w,SEWzR3j"><field name="VAR" id="Nf0};?C5zGUwj;$inZ9;">compass</field></block></value><next><block type="serial_writevalue" id="x~RCLqE,XVj@Wne-YA*F"><value name="name"><shadow type="text" id="SbpF/JIh76XcUg(9uv#7"><field name="TEXT">c</field></shadow></value><value name="value"><block type="variables_get" id="Z?H*3Wm}yP/)H9B`tv~g"><field name="VAR" id="Nf0};?C5zGUwj;$inZ9;">compass</field></block></value></block></next></block></next></block></statement></block><block type="every_interval" id="YH(hCfa-{,d7n@Ng`Ow]" x="260" y="-46"><value name="interval"><shadow type="longTimePicker" id="uu2HaPP)L#_v~*R(~Jo5"><field name="ms">1000</field></shadow></value></block><block type="function_definition" id="KPmbqUP[kW$w4IEV5ToJ" x="1758" y="-22"><mutation name="getDelta_ComHis" functionid="]C0{-7@w]tSty|Ni,-^$"/><field name="function_name">getDelta_ComHis</field><statement name="STACK"><block type="function_return" id="IX!%H3RX:e,FP@0t!dhC"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="typescript_expression" id="cP{qQo}0!M!n?offg;P~" editable="false"><field name="EXPRESSION">cHistory.getDelta(1)</field></block></value></block></statement></block><block type="serial_writenumbers" id="JbF7ZgcLp;1oS`?25_{." disabled="true" x="263" y="80"><value name="values"><block type="typescript_expression" id="j%-@s=Pj[`PM_LdgIQkt" disabled="true" editable="false"><field name="EXPRESSION">cHistory.getHistory()</field></block></value></block><block type="function_definition" id="i9-HXwOBC8u))z~EB{kh" x="2149" y="-14"><mutation name="reset_ComHis" functionid="-G9:ZhDr^~f@?=R7*.G9"/><field name="function_name">reset_ComHis</field><statement name="STACK"><block type="typescript_statement" id="weU,XD~XZ3@3{,BGk=Az" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="cHistory.clearFront();" numlines="1"></mutation></block></statement></block><block type="function_definition" id="%NjxoZP[?m=6U^Z02}R-" x="1765" y="145"><mutation name="append_ComHis" functionid="4dl=.G+$Li5na/!f8Am|"><arg name="value" id="guiyo0yuazakgfauxjxj" type="number"/></mutation><field name="function_name">append_ComHis</field><value name="guiyo0yuazakgfauxjxj"><shadow type="argument_reporter_number" id="un2h:uuDcsD@s;sW`#$c"><field name="VALUE">value</field></shadow></value><statement name="STACK"><block type="typescript_statement" id="I`S^s|RpO1-UFe46!_o$" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="cHistory.append(value);" numlines="1"></mutation></block></statement></block><block type="device_button_event" id=":!P7p}IeT?1X%0E1Z[cq" x="1393" y="265"><field name="NAME">Button.B</field><statement name="HANDLER"><block type="function_call" id="/t|C+0%6V8h)m/Ne@8H."><mutation name="reset_ComHis" functionid="-G9:ZhDr^~f@?=R7*.G9"/></block></statement></block></xml>